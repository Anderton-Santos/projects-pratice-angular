<form [formGroup]="quizForm" (ngSubmit)="onSubmit()">

  <h1>Quiz Form</h1>
  <div formArrayName="questions">
    @for (
    question of quizForm.controls.questions.controls;
     track questionIndex;
     let questionIndex = $index
     ){
      <div class="question" [formGroupName]="questionIndex">
        <input class="border" type="text" formControlName="questionName" placeholder="question name">

        <span (click)="removeQuestion(questionIndex)" class="remove-question" style="cursor: pointer;">X</span>

        <div formArrayName="answers" class="answers">
          <div>answers</div>
          @for (question of quizForm.controls.questions.controls.at(questionIndex)?.controls?.answers?.controls;
           track answerIndex; let answerIndex = $index) {
            <div [formGroupName]="answerIndex" class="answer">
              <input class="border" type="text" placeholder="amswer" formControlName="text">
            </div>
           }
           <button type="button" 
           class="add-answer"
            (click)="addAnswer(questionIndex)">
            adicionar resposta
          </button>

        </div>
      </div>
     }
  </div>
  <div class="add-question">
    <button 
    (click)="addQuestion()"
     type="button">Adicionar pergunta
    </button>
  </div>
  <div><button type="submit">Enviar</button></div>

</form>